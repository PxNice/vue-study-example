<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>观察者模式</title>
</head>

<body>
    <!-- <script src="../vue.js"></script> -->
    <script>
        //发布者-目标
        class Dep {
            constructor() {
                this.subs = []
            }

            //添加订阅者（观察者）
            addSub(sub) {
                if (sub && sub.update) {
                    this.subs.push(sub)
                }
            }

            //通知订阅者调用update
            notify() {
                this.subs.forEach(sub => {
                    sub.update()
                })

            }


        }

        //观察者-订阅者
        class Watcher {

            update() {
                console.log('update')
            }

        }


        //测试
        let dep = new Dep()
        let watcher = new Watcher()

        dep.addSub(watcher)
        dep.notify(watcher)



    </script>
</body>

</html>